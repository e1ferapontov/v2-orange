[output_pin beeper]
pin: PC9
value: 0
shutdown_value: 0
pwm: True
cycle_time: 0.0005 ; Default beeper tone in kHz. 1 / 0.0005 = 2000Hz (2kHz)

[gcode_macro M300]
gcode:
  {% set S = params.S|default(1000)|int %}
  {% set P = params.P|default(100)|int %}

  SET_PIN PIN=beeper VALUE=0.5 CYCLE_TIME={ 1.0/S if S > 0 else 1 }
  G4 P{P}
  SET_PIN PIN=beeper VALUE=0

[gcode_macro BEEP]
gcode:
  # Parameters
  {% set i = params.I|default(1)|int %}           ; Iterations (number of times to beep).
  {% set dur = params.DUR|default(100)|int %}     ; Duration/wait of each beep in ms. Default 100ms.
  {% set freq = params.FREQ|default(2000)|int %}  ; Frequency in Hz. Default 2kHz.
  
  {% for iteration in range(i|int) %}
    SET_PIN PIN=beeper VALUE=0.8 CYCLE_TIME={ 1.0/freq if freq > 0 else 1 }
    G4 P{dur}
    SET_PIN PIN=beeper VALUE=0
    G4 P{dur}
  {% endfor %}


[gcode_macro Song_StillAlive]
gcode:
  M300 P147 S587
  M300 P250 S523
  M300 P255 S587
  M300 P248 S698
  M300 P247 S698
  M300 P149 S659
  M300 P249 S100
  M300 P247 S659
  M300 P247 S740
  M300 P250 S740

[gcode_macro SONG_AFRICA]
gcode:
  M300 S2959 P150
  M300 S2959 P150
  M300 S2959 P150
  M300 S2959 P450
  M300 S2959 P150
  M300 S2959 P450
  M300 S3322 P300
  M300 S1864 P150
  M300 S1975 P1200
  M300 S2489 P150
  M300 S2489 P450
  M300 S2637 P300
  M300 S2959 P300
  M300 S2959 P300
  M300 S2637 P225
  M300 S2637 P300
  M300 S2489 P300
  M300 S2217 P600
  M300 S2217 P300
  M300 S987 P300
  M300 S2489 P600
  M300 S2217 P150
  M300 S987 P300
  M300 S2217 P1200
  M300 S2959 P150
  M300 S2959 P150
  M300 S2959 P600
  M300 S2959 P150
  M300 S2959 P450
  M300 S3322 P300
  M300 S1864 P150
  M300 S1975 P1200
  M300 S2489 P150
  M300 S2489 P150
  M300 S2489 P150
  M300 S2637 P300
  M300 S2959 P300
  M300 S2959 P450
  M300 S2637 P300
  M300 S2637 P300
  M300 S2489 P225
  M300 S2217 P600
  M300 S2217 P300
  M300 S987 P300
  M300 S2489 P900
  M300 S2217 P150
  M300 S987 P300
  M300 S2217 P1200

[gcode_macro SONG_RICE_COOKER_DONE]
gcode:
  M300 S4698.63 P250
  M300 S5274.04 P250
  M300 S4698.63 P250
  M300 S6271.93 P250
  M300 S4698.63 P250
  M300 S5274.04 P250
  M300 S4698.63 P500
  M300 S5274.04 P250
  M300 S5274.04 P250
  M300 S4698.63 P250
  M300 S5274.04 P250
  M300 S4698.63 P125
  M300 S4186.01 P125
  M300 S3951.07 P125
  M300 S3520.00 P125
  M300 S3951.07 P250
  M300 S3135.96 P250
  M300 S4698.63 P250
  M300 S5274.04 P250
  M300 S4698.63 P250
  M300 S6271.93 P250
  M300 S4698.63 P250
  M300 S5274.04 P250
  M300 S4698.63 P500
  M300 S5274.04 P250
  M300 S5274.04 P250
  M300 S4698.63 P250
  M300 S5274.04 P250
  M300 S4698.63 P125
  M300 S4186.01 P125
  M300 S3951.07 P125
  M300 S3520.00 P125
  M300 S3135.96 P500